## End to End test

Terraform in the .terra directory creates a test SNS topic and an SQS queue subscribed
to it. It also creates a user with the policy that allows it to publish into the SNS
and read from the created SQS.

Update the values of AWS Region in .terra/variables.tf and docker-compose.yml to your region.

The tf output values need to be used in the environment variables docker compose reads.
Before running docker compose, execute:

```shell
export ACCESS_KEY= output "key_id value
export SECRET_ACCESS_KEY= output "secret_key_id" value
export SNS_TOPIC_ARN= output "sns_arn" value
export SQS_TOPIC_URL= output "sqs_url" value
export CONCURRENCY= number of threads that will publish into SNS
export TOTAL_MESSAGES= total number of random strings that the above threads will publish to SNS
```

Then cd test && docker compose up will bring up 2 containers  
that will communicate via SNS+SQS. The TOTAL_MESSAGES will be generated by the client container
and published into the SNS topic that terraform created. The client container will read from
that terraform created SQS.